(this["webpackJsonp@stateful/examples"]=this["webpackJsonp@stateful/examples"]||[]).push([[13],{294:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return h}));var s=t(56),a=t.n(s),r=t(10),o=t(57),i=t(0),l=t.n(i),c=t(14),d=t(55),u=t(1),m=function(e){return new Promise((function(n){return setTimeout(n,e)}))};function p(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(200+800*Math.random());case 2:if(!(Math.random()>.5)){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Incorrect value")));case 4:return e.abrupt("return",Promise.resolve({id:1}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){var e=l.a.useState({email:"",password:""}),n=Object(r.a)(e,2),t=n[0],s=n[1],i=l.a.useCallback(function(){var e=Object(o.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,s({}),e.next=5,p();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),t=Math.random(),s({email:t>.5?e.t0.message:"",password:t<.5?e.t0.message:""}),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),[]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("h3",{children:"Form example"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Disable inputs and submit button while pending"}),Object(u.jsx)("li",{children:"Display error/success on inputs and submit button"}),Object(u.jsx)("li",{children:"Monitors parent but add props to children"})]}),Object(u.jsxs)("p",{children:["While we wrap the form element and monitor its ",Object(u.jsx)("code",{children:"onSubmit"})," callback, we need the resulting props not on the form itself, but on some nested children instead.",Object(u.jsx)("br",{}),"Note that we use ",Object(u.jsxs)("code",{children:["provideProps=","{false}"]})," to indicate that we're not interested in receiving the stateful props on the monitored component itself."]}),Object(u.jsxs)("p",{children:["That's why we use ",Object(u.jsx)("code",{children:"Stateful.Consumer"})," around the nested input fields and the submit button to automagically receive the values via context.",Object(u.jsx)("br",{}),"Note that since this is context-based, it works across any depth of component nesting."]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"columns is-5-tablet is-4-desktop is-3-widescreen",children:Object(u.jsx)("div",{className:"column is-half",children:Object(u.jsx)(c.Stateful,{monitor:"onSubmit",provideProps:!1,provideContext:!0,children:Object(u.jsxs)("form",{className:"box",onSubmit:i,children:[Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"Email"}),Object(u.jsxs)("div",{className:"control has-icons-left",children:[Object(u.jsx)(c.Stateful.Consumer,{children:Object(u.jsx)("input",{type:"email",className:"input",placeholder:"e.g. hkakehas@cisco.com"})}),Object(u.jsx)("span",{className:"icon is-small is-left",children:Object(u.jsx)("i",{className:"fa fa-envelope"})}),t.email&&Object(u.jsx)("p",{className:"help is-danger",children:t.email})]})]}),Object(u.jsxs)("div",{className:"field",children:[Object(u.jsx)("label",{className:"label",children:"Password"}),Object(u.jsxs)("div",{className:"control has-icons-left",children:[Object(u.jsx)(c.Stateful.Consumer,{children:Object(u.jsx)("input",{type:"password",className:"input",placeholder:"*********",required:!0})}),Object(u.jsx)("span",{className:"icon is-small is-left",children:Object(u.jsx)("i",{className:"fa fa-lock"})}),t.password&&Object(u.jsx)("p",{className:"help is-danger",children:t.password})]})]}),Object(u.jsx)("div",{className:"field",children:Object(u.jsxs)("label",{className:"checkbox",children:[Object(u.jsx)(c.Stateful.Consumer,{children:Object(u.jsx)("input",{type:"checkbox"})})," ","Remember me"]})}),Object(u.jsx)("div",{className:"field",children:Object(u.jsx)(c.Stateful.Consumer,{children:Object(u.jsx)("button",{className:"button",type:"submit",children:"Login"})})})]})})})}),Object(u.jsx)(d.a,{content:'import React from "react";\nimport { Stateful } from "@loopmode/stateful";\nimport { ToggleCodeViewer } from "../../ToggleCodeViewer";\nimport raw from "raw.macro";\n\n// The Stateful wrapper can be used on form elements as well, by using `monitor="onSubmit"`\n// however, your submit button will be deeply nested, and only the wrapped form element will receive stateful props\n// in order to display success or error state on your submit button, you can use the context features\n// - in the wrapper, do not disable the provideContext prop\n// - deeply nested, you can use Stateful.Consumer to pick up the statefull props and add them to its children\n\nconst wait = (time: number) => new Promise((resolve) => setTimeout(resolve, time));\n\nasync function dummyLogin() {\n  await wait(200 + Math.random() * 800);\n  if (Math.random() > 0.5) {\n    return Promise.reject(new Error("Incorrect value"));\n  }\n  return Promise.resolve({ id: 1 });\n}\n\nexport default function FormContextExample() {\n  const [error, setError] = React.useState<any>({\n    email: "",\n    password: "",\n  });\n  const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    try {\n      setError({});\n      await dummyLogin();\n    } catch (error) {\n      const random = Math.random();\n      setError({\n        email: random > 0.5 ? error.message : "",\n        password: random < 0.5 ? error.message : "",\n      });\n      return error;\n    }\n  }, []);\n\n  return (\n    <>\n      <div className="container">\n        <div className="content">\n          <h3>Form example</h3>\n          <ul>\n            <li>Disable inputs and submit button while pending</li>\n            <li>Display error/success on inputs and submit button</li>\n            <li>Monitors parent but add props to children</li>\n          </ul>\n          <p>\n            While we wrap the form element and monitor its <code>onSubmit</code> callback, we need\n            the resulting props not on the form itself, but on some nested children instead.\n            <br />\n            Note that we use <code>provideProps={`{false}`}</code> to indicate that we\'re not\n            interested in receiving the stateful props on the monitored component itself.\n          </p>\n          <p>\n            That\'s why we use <code>Stateful.Consumer</code> around the nested input fields and the\n            submit button to automagically receive the values via context.\n            <br />\n            Note that since this is context-based, it works across any depth of component nesting.\n          </p>\n        </div>\n        <hr />\n        <div className="columns is-5-tablet is-4-desktop is-3-widescreen">\n          <div className="column is-half">\n            <Stateful monitor="onSubmit" provideProps={false} provideContext={true}>\n              <form className="box" onSubmit={handleSubmit}>\n                <div className="field">\n                  <label className="label">Email</label>\n                  <div className="control has-icons-left">\n                    <Stateful.Consumer>\n                      <input type="email" className="input" placeholder="e.g. hkakehas@cisco.com" />\n                    </Stateful.Consumer>\n                    <span className="icon is-small is-left">\n                      <i className="fa fa-envelope"></i>\n                    </span>\n                    {error.email && <p className="help is-danger">{error.email}</p>}\n                  </div>\n                </div>\n                <div className="field">\n                  <label className="label">Password</label>\n                  <div className="control has-icons-left">\n                    <Stateful.Consumer>\n                      <input type="password" className="input" placeholder="*********" required />\n                    </Stateful.Consumer>\n                    <span className="icon is-small is-left">\n                      <i className="fa fa-lock"></i>\n                    </span>\n                    {error.password && <p className="help is-danger">{error.password}</p>}\n                  </div>\n                </div>\n                <div className="field">\n                  <label className="checkbox">\n                    <Stateful.Consumer>\n                      <input type="checkbox" />\n                    </Stateful.Consumer>{" "}\n                    Remember me\n                  </label>\n                </div>\n                <div className="field">\n                  <Stateful.Consumer>\n                    <button className="button" type="submit">\n                      Login\n                    </button>\n                  </Stateful.Consumer>\n                </div>\n              </form>\n            </Stateful>\n          </div>\n        </div>\n\n        <ToggleCodeViewer content={raw("./form-context-example.tsx")} />\n      </div>\n    </>\n  );\n}\n'})]})})}},55:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var s=t(10),a=t(58),r=t(0),o=t.n(r),i=t(1);function l(e){var n=e.language,t=void 0===n?"jsx":n,r=e.content,l=o.a.useState(!1),c=Object(s.a)(l,2),d=c[0],u=c[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("hr",{}),Object(i.jsxs)("a",{href:"#",onClick:function(){return u(!d)},children:[d?"Hide":"Show"," code"]}),d&&Object(i.jsx)(a.a,{language:t,children:r})]})}}}]);
//# sourceMappingURL=13.1e9bab07.chunk.js.map